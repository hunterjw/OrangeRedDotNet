@page "/u/{userName}"
@page "/u/{userName}/{listingType}"
@page "/user/{userName}"
@page "/user/{userName}/{listingType}"

@if (Account == null)
{
    <h2>@UserName</h2>
    <p>Loading profile...</p>
}
else
{
    <UserCard AccountData="@Account.Data" />
}

@if (Trophies == null)
{
    <p>Loading trophies...</p>
}
else
{
    <TrophiesCard Trophies="@Trophies" />
}

<hr />

<UserProfileNavTabs UserName="@UserName"
                    ActiveTab="@GetListingType()" />
@if (!ListingLoaded)
{
    <p>@GetLoadingQuip()</p>
}
else
{
    @switch (GetListingType())
    {
        case UserProfileListingType.Overview:
        case UserProfileListingType.Gilded:
            <LinkOrCommentList Listing="@LinksOrComments" />
            <ListingPagination After="@LinksOrComments?.Data?.After"
                   Before="@LinksOrComments?.Data?.Before"
                   CurrentPageParameters="@BuildParameters()"
                   RelativeUrl="@GetRelativeUrl()" />
            break;
        case UserProfileListingType.Comments:
            <CommentList Comments="@Comments" />
            <ListingPagination After="@Comments?.Data?.After"
                   Before="@Comments?.Data?.Before"
                   CurrentPageParameters="@BuildParameters()"
                   RelativeUrl="@GetRelativeUrl()" />
            break;
        case UserProfileListingType.Submitted:
            <LinkList Links="@Links" ContentCollapsed="true" />
            <ListingPagination After="@Links?.Data?.After"
                   Before="@Links?.Data?.Before"
                   CurrentPageParameters="@BuildParameters()"
                   RelativeUrl="@GetRelativeUrl()" />
            break;
    }
}