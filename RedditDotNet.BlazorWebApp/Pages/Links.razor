@page "/"
@page "/{listingType}"
@page "/r/{subreddit}"
@page "/r/{subreddit}/{listingType}"
@page "/user/{userName}/m/{multiName}"
@page "/user/{userName}/m/{multiName}/{listingType}"
@page "/me/m/{multiName}"
@page "/me/m/{multiName}/{listingType}"

@if (IsSubreddit)
{
    @if (!SubredditDetailsLoaded)
    {
        <Heading Size="HeadingSize.Is2">@Subreddit</Heading>
    }
    else
    {
        <SubredditCard SubredditDetails="@SubredditDetails" />
        <SubredditRulesCard Rules="@Rules" />
        <hr />
    }
}
else if (IsMultiReddit)
{
    @if (!MultiRedditLoaded)
    {
        <Heading Size="HeadingSize.Is2">@GetMultiRedditUrl()</Heading>
    }
    else
    {
        <MultiRedditCard MultiReddit="@MultiReddit"
                 OnMultiRedditDelete="OnMultiRedditDelete"
                 OnMultiRedditCopy="OnMultiRedditCopy" />
        <hr />
    }
}

<Row>
    <Column ColumnSize="ColumnSize.IsAuto">
        <LinkListingNavTabs ActiveTab="@GetListingType()" Subreddit="@Subreddit" MultiRedditPath="@GetMultiRedditUrl()" />
    </Column>
    @if (GetListingType().Equals("controversial") || GetListingType().Equals("top"))
    {
        <Column ColumnSize="ColumnSize.IsAuto">
            <Select Margin="Margin.Is2.FromBottom" Width="Width.Auto" @bind-SelectedValue="Timescale" @onchange="TimescaleSelect_OnChange">
                <SelectItem Value="@("hour")">Hour</SelectItem>
                <SelectItem Value="@("day")">Day</SelectItem>
                <SelectItem Value="@("week")">Week</SelectItem>
                <SelectItem Value="@("month")">Month</SelectItem>
                <SelectItem Value="@("year")">Year</SelectItem>
                <SelectItem Value="@("all")">All</SelectItem>
            </Select>
        </Column>
    }
</Row>

@if (LinkListing == null)
{
    <Paragraph>@GetLoadingQuip()</Paragraph>
}
else
{
    <LinkList Links="@LinkListing" />

    <ListingPagination After="@LinkListing?.Data?.After"
                   Before="@LinkListing?.Data?.Before"
                   CurrentPageParameters="@BuildParameters()"
                   RelativeUrl="@GetRelativeUrl()" />
}